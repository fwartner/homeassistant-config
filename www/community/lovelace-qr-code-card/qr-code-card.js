/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function t(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}const e=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,r=Symbol(),n=new Map;class i{constructor(t,e){if(this._$cssResult$=!0,e!==r)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){let t=n.get(this.cssText);return e&&void 0===t&&(n.set(this.cssText,t=new CSSStyleSheet),t.replaceSync(this.cssText)),t}toString(){return this.cssText}}const o=(t,...e)=>{const n=1===t.length?t[0]:e.reduce(((e,r,n)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+t[n+1]),t[0]);return new i(n,r)},s=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const r of t.cssRules)e+=r.cssText;return(t=>new i("string"==typeof t?t:t+"",r))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var a;const u=window.trustedTypes,h=u?u.emptyScript:"",l=window.reactiveElementPolyfillSupport,f={toAttribute(t,e){switch(e){case Boolean:t=t?h:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=null!==t;break;case Number:r=null===t?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch(t){r=null}}return r}},c=(t,e)=>e!==t&&(e==e||t==t),d={attribute:!0,type:String,converter:f,reflect:!1,hasChanged:c};class p extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var e;null!==(e=this.l)&&void 0!==e||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,r)=>{const n=this._$Eh(r,e);void 0!==n&&(this._$Eu.set(n,r),t.push(n))})),t}static createProperty(t,e=d){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const r="symbol"==typeof t?Symbol():"__"+t,n=this.getPropertyDescriptor(t,r,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}}static getPropertyDescriptor(t,e,r){return{get(){return this[e]},set(n){const i=this[t];this[e]=n,this.requestUpdate(t,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||d}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const r of e)this.createProperty(r,t[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const t of r)e.unshift(s(t))}else void 0!==t&&e.push(s(t));return e}static _$Eh(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,r;(null!==(e=this._$Eg)&&void 0!==e?e:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(r=t.hostConnected)||void 0===r||r.call(t))}removeController(t){var e;null===(e=this._$Eg)||void 0===e||e.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Et.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const r=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,r)=>{e?t.adoptedStyleSheets=r.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):r.forEach((e=>{const r=document.createElement("style"),n=window.litNonce;void 0!==n&&r.setAttribute("nonce",n),r.textContent=e.cssText,t.appendChild(r)}))})(r,this.constructor.elementStyles),r}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,r){this._$AK(t,r)}_$ES(t,e,r=d){var n,i;const o=this.constructor._$Eh(t,r);if(void 0!==o&&!0===r.reflect){const s=(null!==(i=null===(n=r.converter)||void 0===n?void 0:n.toAttribute)&&void 0!==i?i:f.toAttribute)(e,r.type);this._$Ei=t,null==s?this.removeAttribute(o):this.setAttribute(o,s),this._$Ei=null}}_$AK(t,e){var r,n,i;const o=this.constructor,s=o._$Eu.get(t);if(void 0!==s&&this._$Ei!==s){const t=o.getPropertyOptions(s),a=t.converter,u=null!==(i=null!==(n=null===(r=a)||void 0===r?void 0:r.fromAttribute)&&void 0!==n?n:"function"==typeof a?a:null)&&void 0!==i?i:f.fromAttribute;this._$Ei=s,this[s]=u(e,t.type),this._$Ei=null}}requestUpdate(t,e,r){let n=!0;void 0!==t&&(((r=r||this.constructor.getPropertyOptions(t)).hasChanged||c)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===r.reflect&&this._$Ei!==t&&(void 0===this._$E_&&(this._$E_=new Map),this._$E_.set(t,r))):n=!1),!this.isUpdatePending&&n&&(this._$Ep=this._$EC())}async _$EC(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,e)=>this[e]=t)),this._$Et=void 0);let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(r)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(r)}willUpdate(t){}_$AE(t){var e;null===(e=this._$Eg)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$E_&&(this._$E_.forEach(((t,e)=>this._$ES(e,this[e],t))),this._$E_=void 0),this._$EU()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var g;p.finalized=!0,p.elementProperties=new Map,p.elementStyles=[],p.shadowRootOptions={mode:"open"},null==l||l({ReactiveElement:p}),(null!==(a=globalThis.reactiveElementVersions)&&void 0!==a?a:globalThis.reactiveElementVersions=[]).push("1.0.2");const v=globalThis.trustedTypes,y=v?v.createPolicy("lit-html",{createHTML:t=>t}):void 0,m=`lit$${(Math.random()+"").slice(9)}$`,w="?"+m,_=`<${w}>`,E=document,A=(t="")=>E.createComment(t),b=t=>null===t||"object"!=typeof t&&"function"!=typeof t,$=Array.isArray,P=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,B=/-->/g,C=/>/g,T=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,R=/'/g,S=/"/g,U=/^(?:script|style|textarea)$/i,x=(t=>(e,...r)=>({_$litType$:t,strings:e,values:r}))(1),I=Symbol.for("lit-noChange"),M=Symbol.for("lit-nothing"),N=new WeakMap,L=E.createTreeWalker(E,129,null,!1),O=(t,e)=>{const r=t.length-1,n=[];let i,o=2===e?"<svg>":"",s=P;for(let e=0;e<r;e++){const r=t[e];let a,u,h=-1,l=0;for(;l<r.length&&(s.lastIndex=l,u=s.exec(r),null!==u);)l=s.lastIndex,s===P?"!--"===u[1]?s=B:void 0!==u[1]?s=C:void 0!==u[2]?(U.test(u[2])&&(i=RegExp("</"+u[2],"g")),s=T):void 0!==u[3]&&(s=T):s===T?">"===u[0]?(s=null!=i?i:P,h=-1):void 0===u[1]?h=-2:(h=s.lastIndex-u[2].length,a=u[1],s=void 0===u[3]?T:'"'===u[3]?S:R):s===S||s===R?s=T:s===B||s===C?s=P:(s=T,i=void 0);const f=s===T&&t[e+1].startsWith("/>")?" ":"";o+=s===P?r+_:h>=0?(n.push(a),r.slice(0,h)+"$lit$"+r.slice(h)+m+f):r+m+(-2===h?(n.push(void 0),e):f)}const a=o+(t[r]||"<?>")+(2===e?"</svg>":"");return[void 0!==y?y.createHTML(a):a,n]};class k{constructor({strings:t,_$litType$:e},r){let n;this.parts=[];let i=0,o=0;const s=t.length-1,a=this.parts,[u,h]=O(t,e);if(this.el=k.createElement(u,r),L.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(n=L.nextNode())&&a.length<s;){if(1===n.nodeType){if(n.hasAttributes()){const t=[];for(const e of n.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(m)){const r=h[o++];if(t.push(e),void 0!==r){const t=n.getAttribute(r.toLowerCase()+"$lit$").split(m),e=/([.?@])?(.*)/.exec(r);a.push({type:1,index:i,name:e[2],strings:t,ctor:"."===e[1]?j:"?"===e[1]?q:"@"===e[1]?V:Y})}else a.push({type:6,index:i})}for(const e of t)n.removeAttribute(e)}if(U.test(n.tagName)){const t=n.textContent.split(m),e=t.length-1;if(e>0){n.textContent=v?v.emptyScript:"";for(let r=0;r<e;r++)n.append(t[r],A()),L.nextNode(),a.push({type:2,index:++i});n.append(t[e],A())}}}else if(8===n.nodeType)if(n.data===w)a.push({type:2,index:i});else{let t=-1;for(;-1!==(t=n.data.indexOf(m,t+1));)a.push({type:7,index:i}),t+=m.length-1}i++}}static createElement(t,e){const r=E.createElement("template");return r.innerHTML=t,r}}function z(t,e,r=t,n){var i,o,s,a;if(e===I)return e;let u=void 0!==n?null===(i=r._$Cl)||void 0===i?void 0:i[n]:r._$Cu;const h=b(e)?void 0:e._$litDirective$;return(null==u?void 0:u.constructor)!==h&&(null===(o=null==u?void 0:u._$AO)||void 0===o||o.call(u,!1),void 0===h?u=void 0:(u=new h(t),u._$AT(t,r,n)),void 0!==n?(null!==(s=(a=r)._$Cl)&&void 0!==s?s:a._$Cl=[])[n]=u:r._$Cu=u),void 0!==u&&(e=z(t,u._$AS(t,e.values),u,n)),e}class D{constructor(t,e){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var e;const{el:{content:r},parts:n}=this._$AD,i=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:E).importNode(r,!0);L.currentNode=i;let o=L.nextNode(),s=0,a=0,u=n[0];for(;void 0!==u;){if(s===u.index){let e;2===u.type?e=new H(o,o.nextSibling,this,t):1===u.type?e=new u.ctor(o,u.name,u.strings,this,t):6===u.type&&(e=new W(o,this,t)),this.v.push(e),u=n[++a]}s!==(null==u?void 0:u.index)&&(o=L.nextNode(),s++)}return i}m(t){let e=0;for(const r of this.v)void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,e),e+=r.strings.length-2):r._$AI(t[e])),e++}}class H{constructor(t,e,r,n){var i;this.type=2,this._$AH=M,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=r,this.options=n,this._$Cg=null===(i=null==n?void 0:n.isConnected)||void 0===i||i}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=z(this,t,e),b(t)?t===M||null==t||""===t?(this._$AH!==M&&this._$AR(),this._$AH=M):t!==this._$AH&&t!==I&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.S(t):(t=>{var e;return $(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])})(t)?this.M(t):this.$(t)}A(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}S(t){this._$AH!==t&&(this._$AR(),this._$AH=this.A(t))}$(t){this._$AH!==M&&b(this._$AH)?this._$AA.nextSibling.data=t:this.S(E.createTextNode(t)),this._$AH=t}T(t){var e;const{values:r,_$litType$:n}=t,i="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=k.createElement(n.h,this.options)),n);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===i)this._$AH.m(r);else{const t=new D(i,this),e=t.p(this.options);t.m(r),this.S(e),this._$AH=t}}_$AC(t){let e=N.get(t.strings);return void 0===e&&N.set(t.strings,e=new k(t)),e}M(t){$(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let r,n=0;for(const i of t)n===e.length?e.push(r=new H(this.A(A()),this.A(A()),this,this.options)):r=e[n],r._$AI(i),n++;n<e.length&&(this._$AR(r&&r._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var r;for(null===(r=this._$AP)||void 0===r||r.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cg=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class Y{constructor(t,e,r,n,i){this.type=1,this._$AH=M,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=i,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=M}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,r,n){const i=this.strings;let o=!1;if(void 0===i)t=z(this,t,e,0),o=!b(t)||t!==this._$AH&&t!==I,o&&(this._$AH=t);else{const n=t;let s,a;for(t=i[0],s=0;s<i.length-1;s++)a=z(this,n[r+s],e,s),a===I&&(a=this._$AH[s]),o||(o=!b(a)||a!==this._$AH[s]),a===M?t=M:t!==M&&(t+=(null!=a?a:"")+i[s+1]),this._$AH[s]=a}o&&!n&&this.k(t)}k(t){t===M?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class j extends Y{constructor(){super(...arguments),this.type=3}k(t){this.element[this.name]=t===M?void 0:t}}const F=v?v.emptyScript:"";class q extends Y{constructor(){super(...arguments),this.type=4}k(t){t&&t!==M?this.element.setAttribute(this.name,F):this.element.removeAttribute(this.name)}}class V extends Y{constructor(t,e,r,n,i){super(t,e,r,n,i),this.type=5}_$AI(t,e=this){var r;if((t=null!==(r=z(this,t,e,0))&&void 0!==r?r:M)===I)return;const n=this._$AH,i=t===M&&n!==M||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,o=t!==M&&(n===M||i);i&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,r;"function"==typeof this._$AH?this._$AH.call(null!==(r=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==r?r:this.element,t):this._$AH.handleEvent(t)}}class W{constructor(t,e,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){z(this,t)}}const J=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var K,Q;null==J||J(k,H),(null!==(g=globalThis.litHtmlVersions)&&void 0!==g?g:globalThis.litHtmlVersions=[]).push("2.0.2");class X extends p{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,e;const r=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=r.firstChild),r}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=((t,e,r)=>{var n,i;const o=null!==(n=null==r?void 0:r.renderBefore)&&void 0!==n?n:e;let s=o._$litPart$;if(void 0===s){const t=null!==(i=null==r?void 0:r.renderBefore)&&void 0!==i?i:null;o._$litPart$=s=new H(e.insertBefore(A(),t),t,void 0,null!=r?r:{})}return s._$AI(t),s})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return I}}X.finalized=!0,X._$litElement$=!0,null===(K=globalThis.litElementHydrateSupport)||void 0===K||K.call(globalThis,{LitElement:X});const Z=globalThis.litElementPolyfillSupport;null==Z||Z({LitElement:X}),(null!==(Q=globalThis.litElementVersions)&&void 0!==Q?Q:globalThis.litElementVersions=[]).push("3.0.2");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const G=t=>e=>"function"==typeof e?((t,e)=>(window.customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:r,elements:n}=e;return{kind:r,elements:n,finisher(e){window.customElements.define(t,e)}}})(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,tt=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}};function et(t){return(e,r)=>void 0!==r?((t,e,r)=>{e.constructor.createProperty(r,t)})(t,e,r):tt(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function rt(t){return et({...t,state:!0})}var nt="[^\\s]+";function it(t,e){for(var r=[],n=0,i=t.length;n<i;n++)r.push(t[n].substr(0,e));return r}var ot=function(t){return function(e,r){var n=r[t].map((function(t){return t.toLowerCase()})),i=n.indexOf(e.toLowerCase());return i>-1?i:null}};function st(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0,i=e;n<i.length;n++){var o=i[n];for(var s in o)t[s]=o[s]}return t}var at=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ut=["January","February","March","April","May","June","July","August","September","October","November","December"],ht=it(ut,3),lt={dayNamesShort:it(at,3),dayNames:at,monthNamesShort:ht,monthNames:ut,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}},ft=(st({},lt),function(t){return+t-1}),ct=[null,"[1-9]\\d?"],dt=[null,nt],pt=["isPm",nt,function(t,e){var r=t.toLowerCase();return r===e.amPm[0]?0:r===e.amPm[1]?1:null}],gt=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var r=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?r:-r}return 0}];ot("monthNamesShort"),ot("monthNames");var vt,yt;!function(){try{(new Date).toLocaleDateString("i")}catch(t){return"RangeError"===t.name}}(),function(){try{(new Date).toLocaleString("i")}catch(t){return"RangeError"===t.name}}(),function(){try{(new Date).toLocaleTimeString("i")}catch(t){return"RangeError"===t.name}}(),function(t){t.language="language",t.system="system",t.comma_decimal="comma_decimal",t.decimal_comma="decimal_comma",t.space_comma="space_comma",t.none="none"}(vt||(vt={})),function(t){t.language="language",t.system="system",t.am_pm="12",t.twenty_four="24"}(yt||(yt={}));var mt={description:"QR code generator card",invalid_configuration:"Invalid configuration",loading:"Loading..."},wt={label:{title:"Title (optional)",source:"Source type (required)",text:"Text (required)",entity:"Entity (required)",auth_type:"Authentication type (required)",ssid:"SSID (required)",password:"Password (required)",is_hidden:"Hidden (optional)"},title:{show_password:"Show password",hide_password:"Hide password"},options:{source:{text:"Text",wifi:"WiFi",entity:"Entity"},auth_type:{WEP:"WEP",WPA:"WPA",nopass:"None"}}},_t={source:{missing:"Missing property: source",invalid:"Invalid source type"},text:{missing:"Missing property: text"},auth_type:{missing:"Missing property: auth_type",invalid:"Invalid authentication type"},ssid:{missing:"Missing property: ssid"},password:{missing:"Missing property: password"},entity:{missing:"Missing property: entity"}},Et={error:"An error occurred while generating QR-Code"},At={common:mt,editor:wt,validation:_t,generation:Et};const bt={en:Object.freeze({__proto__:null,common:mt,editor:wt,validation:_t,generation:Et,default:At})};function $t(t,e="",r="",n="",i=t){const o="en";if(!n)try{n=JSON.parse(localStorage.getItem("selectedLanguage")||'"en"')}catch(t){n=(localStorage.getItem("selectedLanguage")||o).replace(/['"]+/g,"")}let s;try{s=Pt(t,null!=n?n:o)}catch(e){s=Pt(t,o)}return void 0===s&&(s=Pt(t,o)),s=null!=s?s:i,""!==e&&""!==r&&(s=s.replace(e,r)),s}function Pt(t,e){return t.split(".").reduce(((t,e)=>t[e]),bt[e])}function Bt(t,e,r){return"string"==typeof t?$t(t,"","",e,r):$t(...t,e,r)}function Ct(t,e,r,n){var i,o;return Bt(t,null!==(i=null==r?void 0:r.language)&&void 0!==i?i:null===(o=null==e?void 0:e.locale)||void 0===o?void 0:o.language,n)}var Tt,Rt;!function(t){t.TEXT="text",t.WIFI="wifi",t.ENTITY="entity"}(Tt||(Tt={})),function(t){t.WEP="WEP",t.WPA="WPA",t.NOPASS="nopass"}(Rt||(Rt={}));const St=[Rt.WEP,Rt.WPA];function Ut(t){return void 0!==t&&St.includes(t)}let xt=class extends X{constructor(){super(...arguments),this._unmaskedPassword=!1,this._initialized=!1}setConfig(t){this._config=t}shouldUpdate(){return this._initialized||this._initialize(),!0}get _title(){var t;return(null===(t=this._config)||void 0===t?void 0:t.title)||""}get _source(){var t;return null===(t=this._config)||void 0===t?void 0:t.source}get _text(){const t=this._config;return(null==t?void 0:t.text)||""}get _auth_type(){const t=this._config;return null==t?void 0:t.auth_type}get _ssid(){const t=this._config;return(null==t?void 0:t.ssid)||""}get _password(){const t=this._config;return(null==t?void 0:t.password)||""}get _is_hidden(){const t=this._config;return(null==t?void 0:t.is_hidden)||!1}get _entity(){const t=this._config;return(null==t?void 0:t.entity)||""}_localize(t){return Ct(t,this.hass,this._config)}render(){var t,e,r;if(!this.hass)return x``;const n=Object.keys(this.hass.states);return x`
            <div class="card-config">
                <div class="values">
                    <paper-input
                        label=${this._localize("editor.label.title")}
                        .value=${this._title}
                        .configValue=${"title"}
                        @value-changed=${this._valueChanged}></paper-input>
                </div>
                
                <div class="values">
                    <paper-dropdown-menu
                        label=${this._localize("editor.label.source")}
                        @iron-select=${this._selectionChanged}
                        .configValue=${"source"}>
                        <paper-listbox
                            slot="dropdown-content"
                            attr-for-selected="value"
                            .selected=${this._source}>
                            ${Object.values(Tt).map((t=>x`<paper-item .value=${t}>${this._localize(`editor.options.source.${t}`)}</paper-item>`))}
                        </paper-listbox>
                    </paper-dropdown-menu>
                </div>
                
                ${(null===(t=this._config)||void 0===t?void 0:t.source)==Tt.TEXT?x`
                <div class="values">
                    <paper-input
                        label=${this._localize("editor.label.text")}
                        .value=${this._text}
                        .configValue=${"text"}
                        @value-changed=${this._valueChanged}></paper-input>
                </div>`:""}
                
                ${(null===(e=this._config)||void 0===e?void 0:e.source)==Tt.WIFI?x`
                <div class="values">
                    <paper-dropdown-menu
                        label=${this._localize("editor.label.auth_type")}
                        @iron-select=${this._selectionChanged}
                        .configValue=${"auth_type"}>
                        <paper-listbox
                            slot="dropdown-content"
                            attr-for-selected="value"
                            .selected=${this._auth_type}>
                            ${Object.values(Rt).map((t=>x`<paper-item .value=${t}>${this._localize(`editor.options.auth_type.${t}`)}</paper-item>`))}
                        </paper-listbox>
                    </paper-dropdown-menu>
                </div>
                <div class="values">
                    <paper-input
                        label=${this._localize("editor.label.ssid")}
                        .value=${this._ssid}
                        .configValue=${"ssid"}
                        @value-changed=${this._valueChanged}></paper-input>
                </div>
                ${Ut(this._auth_type)?x`
                <div class="values">
                    <paper-input
                        type=${this._unmaskedPassword?"text":"password"}
                        label=${this._localize("editor.label.password")}
                        .value=${this._password}
                        .configValue=${"password"}
                        @value-changed=${this._valueChanged}>
                        <ha-icon-button
                            toggles
                            .active=${this._unmaskedPassword}
                            title=${this._unmaskedPassword?this._localize("editor.title.hide_password"):this._localize("editor.title.show_password")}
                            slot="suffix"
                            @click=${this._toggleUnmaskedPassword}>
                            <ha-icon
                                .icon=${this._unmaskedPassword?"hass:eye-off":"hass:eye"}>
                            </ha-icon>
                        </ha-icon-button>
                    </paper-input>
                </div>
                `:""}
                <div class="values">
                    <ha-formfield .label=${this._localize("editor.label.is_hidden")}>
                        <ha-switch
                            .checked=${this._is_hidden}
                            .configValue=${"is_hidden"}
                            @change=${this._valueChanged}></ha-switch>
                    </ha-formfield>
                </div>
                `:""}
              
              ${(null===(r=this._config)||void 0===r?void 0:r.source)==Tt.ENTITY?x`
                <div class="values">
                    <paper-dropdown-menu
                        label=${this._localize("editor.label.entity")}
                        @value-changed=${this._valueChanged}
                        .configValue=${"entity"}>
                        <paper-listbox slot="dropdown-content" .selected=${n.indexOf(this._entity)}>
                            ${n.map((t=>x` <paper-item>${t}</paper-item> `))}
                        </paper-listbox>
                    </paper-dropdown-menu>
                </div>`:""}
              
            </div>
        `}_initialize(){void 0!==this.hass&&void 0!==this._config&&(this._initialized=!0)}_selectionChanged(t){t.stopPropagation(),this._updateConfig(t.currentTarget.configValue,t.detail.item.value)}_valueChanged(t){t.stopPropagation();const e=void 0!==t.target.checked?t.target.checked:t.target.value;this._updateConfig(t.target.configValue,e)}_toggleUnmaskedPassword(){this._unmaskedPassword=!this._unmaskedPassword}_updateConfig(t,e){if(this._config&&this.hass&&this[`_${t}`]!==e){if(t)this._config=Object.assign(Object.assign({},this._config),{[t]:e});else{const t=Object.assign({},this._config);delete t[e],this._config=t}!function(t,e,r,n){n=n||{},r=null==r?{}:r;var i=new Event(e,{bubbles:void 0===n.bubbles||n.bubbles,cancelable:Boolean(n.cancelable),composed:void 0===n.composed||n.composed});i.detail=r,t.dispatchEvent(i)}(this,"config-changed",{config:this._config})}}static get styles(){return o`
            .values {
                padding-left: 16px;
                margin: 8px;
                display: grid;
            }
            
            .values ha-icon-button {
                flex-direction: column;
                width: 24px;
                height: 24px;
                --mdc-icon-button-size: 24px;
                color: var(--secondary-text-color);
            }
            
            .values ha-icon {
              display: flex;
            }
        `}};t([et({attribute:!1})],xt.prototype,"hass",void 0),t([rt()],xt.prototype,"_config",void 0),t([rt()],xt.prototype,"_unmaskedPassword",void 0),xt=t([G("qr-code-card-editor")],xt);var It=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then},Mt={}.toString,Nt=Array.isArray||function(t){return"[object Array]"==Mt.call(t)};Ot.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}();var Lt=Ot.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function Ot(t,e,r){return Ot.TYPED_ARRAY_SUPPORT||this instanceof Ot?"number"==typeof t?Dt(this,t):function(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer)return function(t,e,r,n){if(r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");var i;i=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);Ot.TYPED_ARRAY_SUPPORT?i.__proto__=Ot.prototype:i=Ht(t,i);return i}(t,e,r,n);if("string"==typeof e)return function(t,e){var r=0|jt(e),n=zt(t,r),i=n.write(e);i!==r&&(n=n.slice(0,i));return n}(t,e);return function(t,e){if(Ot.isBuffer(e)){var r=0|kt(e.length),n=zt(t,r);return 0===n.length||e.copy(n,0,0,r),n}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?zt(t,0):Ht(t,e);if("Buffer"===e.type&&Array.isArray(e.data))return Ht(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}(this,t,e,r):new Ot(t,e,r)}function kt(t){if(t>=Lt)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Lt.toString(16)+" bytes");return 0|t}function zt(t,e){var r;return Ot.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e)).__proto__=Ot.prototype:(null===(r=t)&&(r=new Ot(e)),r.length=e),r}function Dt(t,e){var r=zt(t,e<0?0:0|kt(e));if(!Ot.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)r[n]=0;return r}function Ht(t,e){for(var r=e.length<0?0:0|kt(e.length),n=zt(t,r),i=0;i<r;i+=1)n[i]=255&e[i];return n}function Yt(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function jt(t){return Ot.isBuffer(t)?t.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer)?t.byteLength:("string"!=typeof t&&(t=""+t),0===t.length?0:Yt(t).length)}Ot.TYPED_ARRAY_SUPPORT&&(Ot.prototype.__proto__=Uint8Array.prototype,Ot.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Ot[Symbol.species]===Ot&&Object.defineProperty(Ot,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),Ot.prototype.write=function(t,e,r){void 0===e||void 0===r&&"string"==typeof e?(r=this.length,e=0):isFinite(e)&&(e|=0,isFinite(r)?r|=0:r=void 0);var n=this.length-e;if((void 0===r||r>n)&&(r=n),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");return function(t,e,r,n){return function(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}(Yt(e,t.length-r),t,r,n)}(this,t,e,r)},Ot.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),Ot.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=Ot.prototype;else{var i=e-t;r=new Ot(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},Ot.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!Ot.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},Ot.prototype.fill=function(t,e,r){if("string"==typeof t){if("string"==typeof e?(e=0,r=this.length):"string"==typeof r&&(r=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var o=Ot.isBuffer(t)?t:new Ot(t),s=o.length;for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this},Ot.concat=function(t,e){if(!Nt(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return zt(null,0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=Dt(null,e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!Ot.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},Ot.byteLength=jt,Ot.prototype._isBuffer=!0,Ot.isBuffer=function(t){return!(null==t||!t._isBuffer)};var Ft,qt=function(t){var e=new Ot(t);return e.fill(0),e},Vt=function(t){return new Ot(t)},Wt=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],Jt=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},Kt=function(t){return Wt[t]},Qt=function(t){for(var e=0;0!==t;)e++,t>>>=1;return e},Xt=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');Ft=t},Zt=function(){return void 0!==Ft},Gt=function(t){return Ft(t)};function te(t,e){return t(e={exports:{}},e.exports),e.exports}var ee=te((function(t,e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},e.from=function(t,r){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(t){return r}}}));function re(){this.buffer=[],this.length=0}ee.L,ee.M,ee.Q,ee.H,ee.isValid,re.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;r<e;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var ne=re;function ie(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=qt(t*t),this.reservedBit=qt(t*t)}ie.prototype.set=function(t,e,r,n){var i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},ie.prototype.get=function(t,e){return this.data[t*this.size+e]},ie.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},ie.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var oe=ie,se=te((function(t,e){var r=Jt;e.getRowColCoords=function(t){if(1===t)return[];for(var e=Math.floor(t/7)+2,n=r(t),i=145===n?26:2*Math.ceil((n-13)/(2*e-2)),o=[n-7],s=1;s<e-1;s++)o[s]=o[s-1]-i;return o.push(6),o.reverse()},e.getPositions=function(t){for(var r=[],n=e.getRowColCoords(t),i=n.length,o=0;o<i;o++)for(var s=0;s<i;s++)0===o&&0===s||0===o&&s===i-1||o===i-1&&0===s||r.push([n[o],n[s]]);return r}}));se.getRowColCoords,se.getPositions;var ae=Jt,ue=function(t){var e=ae(t);return[[0,0],[e-7,0],[0,e-7]]},he=te((function(t,e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var r=3,n=3,i=40,o=10;function s(t,r,n){switch(t){case e.Patterns.PATTERN000:return(r+n)%2==0;case e.Patterns.PATTERN001:return r%2==0;case e.Patterns.PATTERN010:return n%3==0;case e.Patterns.PATTERN011:return(r+n)%3==0;case e.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(n/3))%2==0;case e.Patterns.PATTERN101:return r*n%2+r*n%3==0;case e.Patterns.PATTERN110:return(r*n%2+r*n%3)%2==0;case e.Patterns.PATTERN111:return(r*n%3+(r+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(t){for(var e=t.size,n=0,i=0,o=0,s=null,a=null,u=0;u<e;u++){i=o=0,s=a=null;for(var h=0;h<e;h++){var l=t.get(u,h);l===s?i++:(i>=5&&(n+=r+(i-5)),s=l,i=1),(l=t.get(h,u))===a?o++:(o>=5&&(n+=r+(o-5)),a=l,o=1)}i>=5&&(n+=r+(i-5)),o>=5&&(n+=r+(o-5))}return n},e.getPenaltyN2=function(t){for(var e=t.size,r=0,i=0;i<e-1;i++)for(var o=0;o<e-1;o++){var s=t.get(i,o)+t.get(i,o+1)+t.get(i+1,o)+t.get(i+1,o+1);4!==s&&0!==s||r++}return r*n},e.getPenaltyN3=function(t){for(var e=t.size,r=0,n=0,o=0,s=0;s<e;s++){n=o=0;for(var a=0;a<e;a++)n=n<<1&2047|t.get(s,a),a>=10&&(1488===n||93===n)&&r++,o=o<<1&2047|t.get(a,s),a>=10&&(1488===o||93===o)&&r++}return r*i},e.getPenaltyN4=function(t){for(var e=0,r=t.data.length,n=0;n<r;n++)e+=t.data[n];return Math.abs(Math.ceil(100*e/r/5)-10)*o},e.applyMask=function(t,e){for(var r=e.size,n=0;n<r;n++)for(var i=0;i<r;i++)e.isReserved(i,n)||e.xor(i,n,s(t,i,n))},e.getBestMask=function(t,r){for(var n=Object.keys(e.Patterns).length,i=0,o=1/0,s=0;s<n;s++){r(s),e.applyMask(s,t);var a=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(s,t),a<o&&(o=a,i=s)}return i}}));he.Patterns,he.isValid,he.getPenaltyN1,he.getPenaltyN2,he.getPenaltyN3,he.getPenaltyN4,he.applyMask,he.getBestMask;var le=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],fe=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430],ce=function(t,e){switch(e){case ee.L:return le[4*(t-1)+0];case ee.M:return le[4*(t-1)+1];case ee.Q:return le[4*(t-1)+2];case ee.H:return le[4*(t-1)+3];default:return}},de=function(t,e){switch(e){case ee.L:return fe[4*(t-1)+0];case ee.M:return fe[4*(t-1)+1];case ee.Q:return fe[4*(t-1)+2];case ee.H:return fe[4*(t-1)+3];default:return}},pe=qt(512),ge=qt(256);!function(){for(var t=1,e=0;e<255;e++)pe[e]=t,ge[t]=e,256&(t<<=1)&&(t^=285);for(e=255;e<512;e++)pe[e]=pe[e-255]}();var ve=function(t){return pe[t]},ye=function(t,e){return 0===t||0===e?0:pe[ge[t]+ge[e]]},me=te((function(t,e){e.mul=function(t,e){for(var r=qt(t.length+e.length-1),n=0;n<t.length;n++)for(var i=0;i<e.length;i++)r[n+i]^=ye(t[n],e[i]);return r},e.mod=function(t,e){for(var r=Vt(t);r.length-e.length>=0;){for(var n=r[0],i=0;i<e.length;i++)r[i]^=ye(e[i],n);for(var o=0;o<r.length&&0===r[o];)o++;r=r.slice(o)}return r},e.generateECPolynomial=function(t){for(var r=Vt([1]),n=0;n<t;n++)r=e.mul(r,[1,ve(n)]);return r}}));me.mul,me.mod,me.generateECPolynomial;for(var we=function(t){var e=Te(t),r=e[0],n=e[1];return 3*(r+n)/4-n},_e=function(t){var e,r,n=Te(t),i=n[0],o=n[1],s=new $e(function(t,e,r){return 3*(e+r)/4-r}(0,i,o)),a=0,u=o>0?i-4:i;for(r=0;r<u;r+=4)e=be[t.charCodeAt(r)]<<18|be[t.charCodeAt(r+1)]<<12|be[t.charCodeAt(r+2)]<<6|be[t.charCodeAt(r+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;2===o&&(e=be[t.charCodeAt(r)]<<2|be[t.charCodeAt(r+1)]>>4,s[a++]=255&e);1===o&&(e=be[t.charCodeAt(r)]<<10|be[t.charCodeAt(r+1)]<<4|be[t.charCodeAt(r+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e);return s},Ee=function(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(Re(t,s,s+o>a?a:s+o));1===n?(e=t[r-1],i.push(Ae[e>>2]+Ae[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(Ae[e>>10]+Ae[e>>4&63]+Ae[e<<2&63]+"="));return i.join("")},Ae=[],be=[],$e="undefined"!=typeof Uint8Array?Uint8Array:Array,Pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Be=0,Ce=Pe.length;Be<Ce;++Be)Ae[Be]=Pe[Be],be[Pe.charCodeAt(Be)]=Be;function Te(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function Re(t,e,r){for(var n,i,o=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(Ae[(i=n)>>18&63]+Ae[i>>12&63]+Ae[i>>6&63]+Ae[63&i]);return o.join("")}be["-".charCodeAt(0)]=62,be["_".charCodeAt(0)]=63;var Se={byteLength:we,toByteArray:_e,fromByteArray:Ee},Ue=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,h=u>>1,l=-7,f=r?i-1:0,c=r?-1:1,d=t[e+f];for(f+=c,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+t[e+f],f+=c,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+t[e+f],f+=c,l-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=h}return(d?-1:1)*s*Math.pow(2,o-n)},xe=function(t,e,r,n,i,o){var s,a,u,h=8*o-i-1,l=(1<<h)-1,f=l>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?c/u:c*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[r+d]=255&s,d+=p,s/=256,h-=8);t[r+d-p]|=128*g},Ie=te((function(t,e){var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=function(t){+t!=t&&(t=0);return o.alloc(+t)},e.INSPECT_MAX_BYTES=50;var n=2147483647;function i(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,o.prototype),e}function o(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return s(t,e,r)}function s(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|c(t,e),n=i(r),s=n.write(t,e);s!==r&&(n=n.slice(0,s));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(k(t,Uint8Array)){var e=new Uint8Array(t);return l(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(k(t,ArrayBuffer)||t&&k(t.buffer,ArrayBuffer))return l(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(k(t,SharedArrayBuffer)||t&&k(t.buffer,SharedArrayBuffer)))return l(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return o.from(n,e,r);var s=function(t){if(o.isBuffer(t)){var e=0|f(t.length),r=i(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||z(t.length)?i(0):h(t);if("Buffer"===t.type&&Array.isArray(t.data))return h(t.data)}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),i(t<0?0:0|f(t))}function h(t){for(var e=t.length<0?0:0|f(t.length),r=i(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function l(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,o.prototype),n}function f(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function c(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||k(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return L(t).length;default:if(i)return n?-1:N(t).length;e=(""+e).toLowerCase(),i=!0}}function d(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,r);case"utf8":case"utf-8":return b(this,e,r);case"ascii":return P(this,e,r);case"latin1":case"binary":return B(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function p(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),z(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=r;o<a;o++)if(h(t,o)===h(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var f=!0,c=0;c<u;c++)if(h(t,o+c)!==h(e,c)){f=!1;break}if(f)return o}return-1}function y(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(z(a))return s;t[r+s]=a}return s}function m(t,e,r,n){return O(N(e,t.length-r),t,r,n)}function w(t,e,r,n){return O(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function _(t,e,r,n){return O(L(e),t,r,n)}function E(t,e,r,n){return O(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function A(t,e,r){return 0===e&&r===t.length?Se.fromByteArray(t):Se.fromByteArray(t.slice(e,r))}function b(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,h=t[i],l=null,f=h>239?4:h>223?3:h>191?2:1;if(i+f<=r)switch(f){case 1:h<128&&(l=h);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&h)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&h)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(t){var e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=$));return r}(n)}e.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,e,r){return s(t,e,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(t,e,r){return function(t,e,r){return a(t),t<=0?i(t):void 0!==e?"string"==typeof r?i(t).fill(e,r):i(t).fill(e):i(t)}(t,e,r)},o.allocUnsafe=function(t){return u(t)},o.allocUnsafeSlow=function(t){return u(t)},o.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==o.prototype},o.compare=function(t,e){if(k(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),k(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(k(s,Uint8Array))i+s.length>n.length?o.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else{if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i)}i+=s.length}return n},o.byteLength=c,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?b(this,0,t):d.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(t,e,r,n,i){if(k(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),u=Math.min(s,a),h=this.slice(n,i),l=t.slice(e,r),f=0;f<u;++f)if(h[f]!==l[f]){s=h[f],a=l[f];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return y(this,t,e,r);case"utf8":case"utf-8":return m(this,t,e,r);case"ascii":case"latin1":case"binary":return w(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;function P(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function B(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function C(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=D[t[o]];return i}function T(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function S(t,e,r,n,i,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function U(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function x(t,e,r,n,i){return e=+e,r>>>=0,i||U(t,0,r,4),xe(t,e,r,n,23,4),r+4}function I(t,e,r,n,i){return e=+e,r>>>=0,i||U(t,0,r,8),xe(t,e,r,n,52,8),r+8}o.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(t,e){return t>>>=0,e||R(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||R(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||R(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return t>>>=0,e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){t>>>=0,e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||R(t,4,this.length),Ue(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||R(t,4,this.length),Ue(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||R(t,8,this.length),Ue(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||R(t,8,this.length),Ue(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||S(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||S(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);S(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);S(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,r){return x(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return x(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return I(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return I(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(!o.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var a=o.isBuffer(t)?t:o.from(t,n),u=a.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<r-e;++s)this[s+e]=a[s%u]}return this};var M=/[^+/0-9A-Za-z-_]/g;function N(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function L(t){return Se.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function O(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function k(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function z(t){return t!=t}var D=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()}));
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ie.Buffer,Ie.SlowBuffer,Ie.INSPECT_MAX_BYTES,Ie.kMaxLength;var Me=Ie.Buffer;function Ne(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Ne.prototype.initialize=function(t){this.degree=t,this.genPoly=me.generateECPolynomial(this.degree)},Ne.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");var e=qt(this.degree),r=Me.concat([t,e],t.length+this.degree),n=me.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){var o=qt(this.degree);return n.copy(o,i),o}return n};var Le=Ne,Oe=function(t){return!isNaN(t)&&t>=1&&t<=40},ke="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",ze="(?:(?![A-Z0-9 $%*+\\-./:]|"+(ke=ke.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+",De=new RegExp(ke,"g"),He=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ye=new RegExp(ze,"g"),je=new RegExp("[0-9]+","g"),Fe=new RegExp("[A-Z $%*+\\-./:]+","g"),qe=new RegExp("^"+ke+"$"),Ve=new RegExp("^[0-9]+$"),We=new RegExp("^[A-Z0-9 $%*+\\-./:]+$"),Je={KANJI:De,BYTE_KANJI:He,BYTE:Ye,NUMERIC:je,ALPHANUMERIC:Fe,testKanji:function(t){return qe.test(t)},testNumeric:function(t){return Ve.test(t)},testAlphanumeric:function(t){return We.test(t)}},Ke=te((function(t,e){e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!Oe(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return Je.testNumeric(t)?e.NUMERIC:Je.testAlphanumeric(t)?e.ALPHANUMERIC:Je.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits},e.from=function(t,r){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(t){return r}}}));Ke.NUMERIC,Ke.ALPHANUMERIC,Ke.BYTE,Ke.KANJI,Ke.MIXED,Ke.getCharCountIndicator,Ke.getBestModeForData,Ke.isValid;var Qe=te((function(t,e){var r=Qt(7973);function n(t,e){return Ke.getCharCountIndicator(t,e)+4}function i(t,e){var r=0;return t.forEach((function(t){var i=n(t.mode,e);r+=i+t.getBitsLength()})),r}e.from=function(t,e){return Oe(t)?parseInt(t,10):e},e.getCapacity=function(t,e,r){if(!Oe(t))throw new Error("Invalid QR Code version");void 0===r&&(r=Ke.BYTE);var i=8*(Kt(t)-de(t,e));if(r===Ke.MIXED)return i;var o=i-n(r,t);switch(r){case Ke.NUMERIC:return Math.floor(o/10*3);case Ke.ALPHANUMERIC:return Math.floor(o/11*2);case Ke.KANJI:return Math.floor(o/13);case Ke.BYTE:default:return Math.floor(o/8)}},e.getBestVersionForData=function(t,r){var n,o=ee.from(r,ee.M);if(Nt(t)){if(t.length>1)return function(t,r){for(var n=1;n<=40;n++)if(i(t,n)<=e.getCapacity(n,r,Ke.MIXED))return n}(t,o);if(0===t.length)return 1;n=t[0]}else n=t;return function(t,r,n){for(var i=1;i<=40;i++)if(r<=e.getCapacity(i,n,t))return i}(n.mode,n.getLength(),o)},e.getEncodedBits=function(t){if(!Oe(t)||t<7)throw new Error("Invalid QR Code version");for(var e=t<<12;Qt(e)-r>=0;)e^=7973<<Qt(e)-r;return t<<12|e}}));Qe.getCapacity,Qe.getBestVersionForData,Qe.getEncodedBits;var Xe=Qt(1335),Ze=function(t,e){for(var r=t.bit<<3|e,n=r<<10;Qt(n)-Xe>=0;)n^=1335<<Qt(n)-Xe;return 21522^(r<<10|n)};function Ge(t){this.mode=Ke.NUMERIC,this.data=t.toString()}Ge.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},Ge.prototype.getLength=function(){return this.data.length},Ge.prototype.getBitsLength=function(){return Ge.getBitsLength(this.data.length)},Ge.prototype.write=function(t){var e,r,n;for(e=0;e+3<=this.data.length;e+=3)r=this.data.substr(e,3),n=parseInt(r,10),t.put(n,10);var i=this.data.length-e;i>0&&(r=this.data.substr(e),n=parseInt(r,10),t.put(n,3*i+1))};var tr=Ge,er=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function rr(t){this.mode=Ke.ALPHANUMERIC,this.data=t}rr.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},rr.prototype.getLength=function(){return this.data.length},rr.prototype.getBitsLength=function(){return rr.getBitsLength(this.data.length)},rr.prototype.write=function(t){var e;for(e=0;e+2<=this.data.length;e+=2){var r=45*er.indexOf(this.data[e]);r+=er.indexOf(this.data[e+1]),t.put(r,11)}this.data.length%2&&t.put(er.indexOf(this.data[e]),6)};var nr=rr;function ir(t){this.mode=Ke.BYTE,this.data=Vt(t)}ir.getBitsLength=function(t){return 8*t},ir.prototype.getLength=function(){return this.data.length},ir.prototype.getBitsLength=function(){return ir.getBitsLength(this.data.length)},ir.prototype.write=function(t){for(var e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var or=ir;function sr(t){this.mode=Ke.KANJI,this.data=t}sr.getBitsLength=function(t){return 13*t},sr.prototype.getLength=function(){return this.data.length},sr.prototype.getBitsLength=function(){return sr.getBitsLength(this.data.length)},sr.prototype.write=function(t){var e;for(e=0;e<this.data.length;e++){var r=Gt(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else{if(!(r>=57408&&r<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");r-=49472}r=192*(r>>>8&255)+(255&r),t.put(r,13)}};var ar=sr,ur=te((function(t){var e={single_source_shortest_paths:function(t,r,n){var i={},o={};o[r]=0;var s,a,u,h,l,f,c,d=e.PriorityQueue.make();for(d.push(r,0);!d.empty();)for(u in a=(s=d.pop()).value,h=s.cost,l=t[a]||{})l.hasOwnProperty(u)&&(f=h+l[u],c=o[u],(void 0===o[u]||c>f)&&(o[u]=f,d.push(u,f),i[u]=a));if(void 0!==n&&void 0===o[n]){var p=["Could not find a path from ",r," to ",n,"."].join("");throw new Error(p)}return i},extract_shortest_path_from_predecessor_list:function(t,e){for(var r=[],n=e;n;)r.push(n),n=t[n];return r.reverse(),r},find_path:function(t,r,n){var i=e.single_source_shortest_paths(t,r,n);return e.extract_shortest_path_from_predecessor_list(i,n)},PriorityQueue:{make:function(t){var r,n=e.PriorityQueue,i={};for(r in t=t||{},n)n.hasOwnProperty(r)&&(i[r]=n[r]);return i.queue=[],i.sorter=t.sorter||n.default_sorter,i},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var r={value:t,cost:e};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=e})),hr=te((function(t,e){function r(t){return unescape(encodeURIComponent(t)).length}function n(t,e,r){for(var n,i=[];null!==(n=t.exec(r));)i.push({data:n[0],index:n.index,mode:e,length:n[0].length});return i}function i(t){var e,r,i=n(Je.NUMERIC,Ke.NUMERIC,t),o=n(Je.ALPHANUMERIC,Ke.ALPHANUMERIC,t);return Zt()?(e=n(Je.BYTE,Ke.BYTE,t),r=n(Je.KANJI,Ke.KANJI,t)):(e=n(Je.BYTE_KANJI,Ke.BYTE,t),r=[]),i.concat(o,e,r).sort((function(t,e){return t.index-e.index})).map((function(t){return{data:t.data,mode:t.mode,length:t.length}}))}function o(t,e){switch(e){case Ke.NUMERIC:return tr.getBitsLength(t);case Ke.ALPHANUMERIC:return nr.getBitsLength(t);case Ke.KANJI:return ar.getBitsLength(t);case Ke.BYTE:return or.getBitsLength(t)}}function s(t,e){var r,n=Ke.getBestModeForData(t);if((r=Ke.from(e,n))!==Ke.BYTE&&r.bit<n.bit)throw new Error('"'+t+'" cannot be encoded with mode '+Ke.toString(r)+".\n Suggested mode is: "+Ke.toString(n));switch(r!==Ke.KANJI||Zt()||(r=Ke.BYTE),r){case Ke.NUMERIC:return new tr(t);case Ke.ALPHANUMERIC:return new nr(t);case Ke.KANJI:return new ar(t);case Ke.BYTE:return new or(t)}}e.fromArray=function(t){return t.reduce((function(t,e){return"string"==typeof e?t.push(s(e,null)):e.data&&t.push(s(e.data,e.mode)),t}),[])},e.fromString=function(t,n){for(var s=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];switch(i.mode){case Ke.NUMERIC:e.push([i,{data:i.data,mode:Ke.ALPHANUMERIC,length:i.length},{data:i.data,mode:Ke.BYTE,length:i.length}]);break;case Ke.ALPHANUMERIC:e.push([i,{data:i.data,mode:Ke.BYTE,length:i.length}]);break;case Ke.KANJI:e.push([i,{data:i.data,mode:Ke.BYTE,length:r(i.data)}]);break;case Ke.BYTE:e.push([{data:i.data,mode:Ke.BYTE,length:r(i.data)}])}}return e}(i(t)),a=function(t,e){for(var r={},n={start:{}},i=["start"],s=0;s<t.length;s++){for(var a=t[s],u=[],h=0;h<a.length;h++){var l=a[h],f=""+s+h;u.push(f),r[f]={node:l,lastCount:0},n[f]={};for(var c=0;c<i.length;c++){var d=i[c];r[d]&&r[d].node.mode===l.mode?(n[d][f]=o(r[d].lastCount+l.length,l.mode)-o(r[d].lastCount,l.mode),r[d].lastCount+=l.length):(r[d]&&(r[d].lastCount=l.length),n[d][f]=o(l.length,l.mode)+4+Ke.getCharCountIndicator(l.mode,e))}}i=u}for(c=0;c<i.length;c++)n[i[c]].end=0;return{map:n,table:r}}(s,n),u=ur.find_path(a.map,"start","end"),h=[],l=1;l<u.length-1;l++)h.push(a.table[u[l]].node);return e.fromArray(function(t){return t.reduce((function(t,e){var r=t.length-1>=0?t[t.length-1]:null;return r&&r.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)}),[])}(h))},e.rawSplit=function(t){return e.fromArray(i(t))}}));function lr(t,e,r){var n,i,o=t.size,s=Ze(e,r);for(n=0;n<15;n++)i=1==(s>>n&1),n<6?t.set(n,8,i,!0):n<8?t.set(n+1,8,i,!0):t.set(o-15+n,8,i,!0),n<8?t.set(8,o-n-1,i,!0):n<9?t.set(8,15-n-1+1,i,!0):t.set(8,15-n-1,i,!0);t.set(o-8,8,1,!0)}function fr(t,e,r){var n=new ne;r.forEach((function(e){n.put(e.mode.bit,4),n.put(e.getLength(),Ke.getCharCountIndicator(e.mode,t)),e.write(n)}));var i=8*(Kt(t)-de(t,e));for(n.getLengthInBits()+4<=i&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(0);for(var o=(i-n.getLengthInBits())/8,s=0;s<o;s++)n.put(s%2?17:236,8);return function(t,e,r){for(var n=Kt(e),i=de(e,r),o=n-i,s=ce(e,r),a=s-n%s,u=Math.floor(n/s),h=Math.floor(o/s),l=h+1,f=u-h,c=new Le(f),d=0,p=new Array(s),g=new Array(s),v=0,y=Vt(t.buffer),m=0;m<s;m++){var w=m<a?h:l;p[m]=y.slice(d,d+w),g[m]=c.encode(p[m]),d+=w,v=Math.max(v,w)}var _,E,A=qt(n),b=0;for(_=0;_<v;_++)for(E=0;E<s;E++)_<p[E].length&&(A[b++]=p[E][_]);for(_=0;_<f;_++)for(E=0;E<s;E++)A[b++]=g[E][_];return A}(n,t,e)}function cr(t,e,r,n){var i;if(Nt(t))i=hr.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");var o=e;if(!o){var s=hr.rawSplit(t);o=Qe.getBestVersionForData(s,r)}i=hr.fromString(t,o||40)}var a=Qe.getBestVersionForData(i,r);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<a)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+a+".\n")}else e=a;var u=fr(e,r,i),h=Jt(e),l=new oe(h);return function(t,e){for(var r=t.size,n=ue(e),i=0;i<n.length;i++)for(var o=n[i][0],s=n[i][1],a=-1;a<=7;a++)if(!(o+a<=-1||r<=o+a))for(var u=-1;u<=7;u++)s+u<=-1||r<=s+u||(a>=0&&a<=6&&(0===u||6===u)||u>=0&&u<=6&&(0===a||6===a)||a>=2&&a<=4&&u>=2&&u<=4?t.set(o+a,s+u,!0,!0):t.set(o+a,s+u,!1,!0))}(l,e),function(t){for(var e=t.size,r=8;r<e-8;r++){var n=r%2==0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}(l),function(t,e){for(var r=se.getPositions(e),n=0;n<r.length;n++)for(var i=r[n][0],o=r[n][1],s=-2;s<=2;s++)for(var a=-2;a<=2;a++)-2===s||2===s||-2===a||2===a||0===s&&0===a?t.set(i+s,o+a,!0,!0):t.set(i+s,o+a,!1,!0)}(l,e),lr(l,r,0),e>=7&&function(t,e){for(var r,n,i,o=t.size,s=Qe.getEncodedBits(e),a=0;a<18;a++)r=Math.floor(a/3),n=a%3+o-8-3,i=1==(s>>a&1),t.set(r,n,i,!0),t.set(n,r,i,!0)}(l,e),function(t,e){for(var r=t.size,n=-1,i=r-1,o=7,s=0,a=r-1;a>0;a-=2)for(6===a&&a--;;){for(var u=0;u<2;u++)if(!t.isReserved(i,a-u)){var h=!1;s<e.length&&(h=1==(e[s]>>>o&1)),t.set(i,a-u,h),-1==--o&&(s++,o=7)}if((i+=n)<0||r<=i){i-=n,n=-n;break}}}(l,u),isNaN(n)&&(n=he.getBestMask(l,lr.bind(null,l,r))),he.applyMask(n,l),lr(l,r,n),{modules:l,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}hr.fromArray,hr.fromString,hr.rawSplit;var dr=function(t,e){if(void 0===t||""===t)throw new Error("No input text");var r,n,i=ee.M;return void 0!==e&&(i=ee.from(e.errorCorrectionLevel,ee.M),r=Qe.from(e.version),n=he.from(e.maskPattern),e.toSJISFunc&&Xt(e.toSJISFunc)),cr(t,r,i,n)},pr=te((function(t,e){function r(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");var e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map((function(t){return[t,t]})))),6===e.length&&e.push("F","F");var r=parseInt(e.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+e.slice(0,6).join("")}}e.getOptions=function(t){t||(t={}),t.color||(t.color={});var e=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,n=t.width&&t.width>=21?t.width:void 0,i=t.scale||4;return{width:n,scale:n?4:i,margin:e,color:{dark:r(t.color.dark||"#000000ff"),light:r(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},e.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},e.getImageWidth=function(t,r){var n=e.getScale(t,r);return Math.floor((t+2*r.margin)*n)},e.qrToImageData=function(t,r,n){for(var i=r.modules.size,o=r.modules.data,s=e.getScale(i,n),a=Math.floor((i+2*n.margin)*s),u=n.margin*s,h=[n.color.light,n.color.dark],l=0;l<a;l++)for(var f=0;f<a;f++){var c=4*(l*a+f),d=n.color.light;if(l>=u&&f>=u&&l<a-u&&f<a-u)d=h[o[Math.floor((l-u)/s)*i+Math.floor((f-u)/s)]?1:0];t[c++]=d.r,t[c++]=d.g,t[c++]=d.b,t[c]=d.a}}}));pr.getOptions,pr.getScale,pr.getImageWidth,pr.qrToImageData;var gr=te((function(t,e){e.render=function(t,e,r){var n=r,i=e;void 0!==n||e&&e.getContext||(n=e,e=void 0),e||(i=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),n=pr.getOptions(n);var o=pr.getImageWidth(t.modules.size,n),s=i.getContext("2d"),a=s.createImageData(o,o);return pr.qrToImageData(a.data,t,n),function(t,e,r){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=r,e.width=r,e.style.height=r+"px",e.style.width=r+"px"}(s,i,o),s.putImageData(a,0,0),i},e.renderToDataURL=function(t,r,n){var i=n;void 0!==i||r&&r.getContext||(i=r,r=void 0),i||(i={});var o=e.render(t,r,i),s=i.type||"image/png",a=i.rendererOpts||{};return o.toDataURL(s,a.quality)}}));function vr(t,e){var r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function yr(t,e,r){var n=t+e;return void 0!==r&&(n+=" "+r),n}gr.render,gr.renderToDataURL;var mr=function(t,e,r){var n=pr.getOptions(e),i=t.modules.size,o=t.modules.data,s=i+2*n.margin,a=n.color.light.a?"<path "+vr(n.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",u="<path "+vr(n.color.dark,"stroke")+' d="'+function(t,e,r){for(var n="",i=0,o=!1,s=0,a=0;a<t.length;a++){var u=Math.floor(a%e),h=Math.floor(a/e);u||o||(o=!0),t[a]?(s++,a>0&&u>0&&t[a-1]||(n+=o?yr("M",u+r,.5+h+r):yr("m",i,0),i=0,o=!1),u+1<e&&t[a+1]||(n+=yr("h",s),s=0)):i++}return n}(o,i,n.margin)+'"/>',h='viewBox="0 0 '+s+" "+s+'"',l='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+h+' shape-rendering="crispEdges">'+a+u+"</svg>\n";return"function"==typeof r&&r(null,l),l};function wr(t,e,r,n,i){var o=[].slice.call(arguments,1),s=o.length,a="function"==typeof o[s-1];if(!a&&!It())throw new Error("Callback required as last argument");if(!a){if(s<1)throw new Error("Too few arguments provided");return 1===s?(r=e,e=n=void 0):2!==s||e.getContext||(n=r,r=e,e=void 0),new Promise((function(i,o){try{var s=dr(r,n);i(t(s,e,n))}catch(t){o(t)}}))}if(s<2)throw new Error("Too few arguments provided");2===s?(i=r,r=e,e=n=void 0):3===s&&(e.getContext&&void 0===i?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0));try{var u=dr(r,n);i(null,t(u,e,n))}catch(t){i(t)}}var _r={create:dr,toCanvas:wr.bind(null,gr.render),toDataURL:wr.bind(null,gr.renderToDataURL),toString:wr.bind(null,(function(t,e,r){return mr(t,r)}))};class Er{constructor(t,e){this.quality={margin:1,width:500},this.hass=t,this.config=e}async generate(){try{return _r.toDataURL(this.input,this.quality)}catch(t){throw new Error(Bt("generation.error"))}}}const Ar=new Map([[Tt.TEXT,class extends Er{get input(){return this.config.text||""}}],[Tt.WIFI,class extends Er{constructor(){super(...arguments),this.special_chars=["\\",";",",",'"',":"]}_escape(t){return this.special_chars.reduce(((t,e)=>t.replace(e,"\\"+e)),t)}get input(){let t=`WIFI:T:${this.config.auth_type||""};S:${this._escape(this.config.ssid||"")};`;return Ut(this.config.auth_type)&&(t+=`P:${this._escape(this.config.password||"")};`),this.config.is_hidden||(t+="H:true"),t}}],[Tt.ENTITY,class extends Er{get input(){var t;return null===(t=this.hass)||void 0===t?void 0:t.states[this.config.entity].state}}]]);class br{constructor(t){this.config=t}validate(){return this._validate()}}class $r extends br{_validate(){const t=[];return this.config.source?Object.values(Tt).includes(this.config.source)||t.push("validation.source.invalid"):t.push("validation.source.missing"),t}}const Pr=new Map([[Tt.TEXT,class extends br{_validate(){const t=[];return this.config.text||t.push("validation.text.missing"),t}}],[Tt.WIFI,class extends br{_validate(){const t=[];return this.config.auth_type?Object.values(Rt).includes(this.config.auth_type)||t.push("validation.auth_type.invalid"):t.push("validation.auth_type.missing"),this.config.ssid||t.push("validation.ssid.missing"),Ut(this.config.auth_type)&&!this.config.password&&t.push("validation.password.missing"),t}}],[Tt.ENTITY,class extends br{_validate(){const t=[];return this.config.entity||t.push("validation.entity.missing"),t}}]]);console.info("%c QR-CODE-GENERATOR %c v1.0.2 ","color: black; background: white; font-weight: 700;","color: white; background: black; font-weight: 700;");const Br=window;Br.customCards=Br.customCards||[],Br.customCards.push({type:"qr-code-card",name:"QR Code Card",description:Bt("common.description"),preview:!0});let Cr=class extends X{constructor(){super(...arguments),this.errors=[],this.dataUrl=""}static async getConfigElement(){return document.createElement("qr-code-card-editor")}static getStubConfig(){return{type:"custom:qr-code-card",source:Tt.TEXT,text:"QRCode example text"}}set hass(t){this._hass=t}get hass(){return this._hass}setConfig(t){if(!t)throw new Error(this._localize("common.invalid_configuration"));this.config=t,this.errors=function(t){const e=[];if(new $r(t).validate().forEach((t=>e.push(t))),0==e.length){const r=Pr.get(t.source);r&&new r(t).validate().forEach((t=>e.push(t)))}return e.map((e=>Bt(e,t.language)))}(this.config),this.errors.length>0||this._generateQR()}_generateQR(){(async function(t,e){const r=Ar.get(e.source);if(!r)throw new Error(Bt("validation.source.invalid"));return await new r(t,e).generate()})(this.hass,this.config).then((t=>{this.dataUrl=t})).catch((t=>{this.errors=[t.message]}))}_localize(t){return Ct(t,this.hass,this.config)}shouldUpdate(t){var e;if(t.has("dataUrl")||t.has("errors"))return!0;if(null===(e=this.config)||void 0===e?void 0:e.entity){const e=t.get("_hass");if(e)return e.states[this.config.entity]!==this.hass.states[this.config.entity]}return!1}render(){var t,e;return this.errors.length>0?this._showErrors(this.errors):this.dataUrl?x`
            <ha-card>
                ${(null!==(e=null===(t=this.config)||void 0===t?void 0:t.title)&&void 0!==e?e:"").length>0?x`<h1 class="card-header">${this.config.title}</h1>`:""}
                <div class="qrcode-overlay">
                    <img class="qrcode" src="${this.dataUrl}">
                </div>
            </ha-card>
          `:x`
                <ha-card>
                    <span>${this._localize("common.loading")}</span>
                </ha-card>
            `}_showErrors(t){t.forEach((t=>console.error(t)));const e=document.createElement("hui-error-card");return e.setConfig({type:"error",error:t[0],origConfig:this.config}),x` ${e} `}static get styles(){return o`
            :host {
                display: flex;
                flex: 1;
                flex-direction: column;
            }
            ha-card {
                flex-direction: column;
                flex: 1;
                position: relative;
                padding: 0px;
                border-radius: 4px;
                overflow: hidden;
            }
            .qrcode {
                max-width:100%;
            }
        `}};t([et({attribute:!1})],Cr.prototype,"_hass",void 0),t([rt()],Cr.prototype,"errors",void 0),t([rt()],Cr.prototype,"dataUrl",void 0),Cr=t([G("qr-code-card")],Cr);export{Cr as QRCodeCard};
