substitutions:
  devicename: round-display-01
  friendname: round-display-01
  location: master
  board: esp32-c3-devkitm-1
  repin: GPIO1
  dcpin: GPIO2
  bkpin: GPIO3
  clpin: GPIO6
  mopin: GPIO7
  cspin: GPIO10

esphome:
  name: $devicename
  friendly_name: $friendname

esp32:
  board: $board
  framework:
    type: arduino

logger:

api:
  encryption:
    key: "oW4E2RB4CXElmMpksPt9bN/U02GEQtSePSNebBtzS/g="

ota:
  password: "a8f05bc64090c2c9cf9b6c59ec6b4854"

wifi:
  ssid: !secret wifi_ssid_iot
  password: !secret wifi_password

  ap:
    ssid: "Round-Display-01"
    password: "khyTwpZIYSaY"

time:
  - platform: homeassistant
    timezone: "Europe/Berlin"
    id: esptime

sensor:
  - platform: uptime
    name: "$devicename Uptime"
  - platform: wifi_signal
    name: "$devicename WiFi Signal"
    update_interval: 60s    
  - platform: homeassistant
    id: outdoor_temperature
    entity_id: sensor.balkon_temperature
  - platform: homeassistant
    id: max_temperature
    entity_id: sensor.openweathermap_forecast_temperature
  - platform: homeassistant
    id: min_temperature
    entity_id: sensor.openweathermap_forecast_temperature_low

external_components:
  - source: github://bearpawmaxim/esphome@pr3625fix
    components: [ gc9a01 ]
  - source: github://GadgetFactory/CST816S_touchscreen@1.0.0

spi:
  mosi_pin: $mopin
  clk_pin: $clpin
#mosi = Master Out Slave In
#miso = Master In Slave Out or fermented bean paste. In this case, most likely the former rather than the latter. Doesn't matter as not used.

output:
  - platform: ledc
    pin: $bkpin
    id: gpio_3_backlight_pwm
light:
  - platform: monochromatic
    output: gpio_3_backlight_pwm
    name: "Display Backlight"
    id: back_light
    restore_mode: ALWAYS_ON

font:
  - file: "gfonts://Roboto"
    id: font_16
    size: 16
  - file: "gfonts://Roboto"
    id: font_24
    size: 24
  - file: "gfonts://Roboto"
    id: font_32
    size: 32
    glyphs: "!%()'&/+,-_.:°0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZÆØÅÄÖÉ abcdefghijklmnopqrstuvwxyzæøåäöéá"

color:
  - id: my_red
    red: 100%
    green: 3%
    blue: 5%
  - id: my_green
    red: 3%
    green: 100%
    blue: 5%
  - id: my_blue
    red: 3%
    green: 5%
    blue: 100%

animation:
  - file: "icons/sunny.gif"
    id: clear_day
    resize: 40x40
    type: RGB565
image:
  - file: "icons/sunny.gif"
    id: gifArt

display:
#  - platform: ili9xxx
#    model: gc9a01
  - platform: gc9a01
    id: watchface
    reset_pin: $repin
    cs_pin: $cspin
    dc_pin: $dcpin
    rotation: 90
    pages:
      - id: page1
        lambda: |-
          id(clear_day).next_frame();
          it.image(100, 30, id(clear_day), COLOR_ON, COLOR_OFF);
          it.strftime(120,80, id(font_16), id(my_blue), TextAlign::CENTER, "%A %b %d", id(esptime).now());
          it.strftime(120,120, id(font_32), TextAlign::CENTER, "%I:%M %p", id(esptime).now());
          it.printf(120, 170, id(font_32), id(my_green), TextAlign::CENTER, "Now: %.1f°", id(outdoor_temperature).state);
          it.circle(120, 120, 115, id(my_red));
      - id: page2
        lambda: |-
          id(clear_day).next_frame();
          it.image(100, 30, id(clear_day), COLOR_ON, COLOR_OFF);
          it.strftime(120,80, id(font_16), id(my_blue), TextAlign::CENTER, "%A %b %d", id(esptime).now());
          it.printf(120,120, id(font_24), TextAlign::CENTER, "Today Min/Max:");
          it.printf(120, 170, id(font_32), id(my_green), TextAlign::CENTER, "%.1f/%.1f°", id(min_temperature).state,id(max_temperature).state);
          it.circle(120, 120, 115, id(my_blue));
      
interval:
  - interval: 5s
    then:
      - display.page.show_next: watchface
      - component.update: watchface